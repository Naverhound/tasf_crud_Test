
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> CRUD Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
  <%  let total_venta = 0%>
    <h1>Consulta de Ventas</h1>
    <h3>  </h3>
    <form class="d-flex m-5" action="/index" method="get">
        <div class="mb-3">
          <label for="" class="form-label">Folio de la venta</label>
          <input type="text"
            class="form-control" name="id" id="" aria-describedby="helpId" placeholder="">
          <small id="helpId" class="form-text text-muted">Foli numerico a buscar, vacio para mostrar todo</small>
        </div>
        <div class="p-4">
          <button type="submit" name="" id="" class="btn btn-primary" >Buscar</button>
        </div>
    </form>
    <table class="table table-dark table-hover">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Folio de Venta</th>
            <th scope="col">Producto</th>
            <th scope="col">Cantidad</th>
            <th scope="col">Precio Unitario</th>
            <th scope="col">Total de Grupo</th>
            <th scope="col">Acciones</th>
          </tr>
        </thead>
        <tbody>
        <% result.forEach((element,index)=>{ %> 
          <%  total_venta +=(element.Cantidad * element.Precio_Unitario) %>
            <tr>
                <th scope="row"><%=index+1%></th>
                <td><%=element.Folio%></td>
                <td><%=element.Producto%></td>
                <td><%=element.Cantidad%></td>
                <td><%=element.Precio_Unitario%></td>
                <td>$<%=(element.Cantidad * element.Precio_Unitario).toFixed(2)%></td>
                <td>
                  <a name="" id="" class="btn btn-outline-info" href="#" role="button">Editar</a>
                  <a name="" id="" class="btn btn-outline-danger" href="#" role="button">Borrar</a>
                </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
      <div class="d-flex mt-4 justify-content-between ps-5 pe-5">
        <div class="d-flex ">
          <label for="">Total de productos: </label>
          <input class="border-bottom border-top-0 text-center
              border-start-0 border-end-0 border-3 border-dark " type="text" name="" id="" value="<%=result.length%>">
        </div>
        <div class="d-flex">
          <label for="">Total de venta: </label>
          <input class="border-bottom border-top-0 text-center
              border-start-0 border-end-0 border-3 border-dark " type="text" name="" id="" value="<%=(total_venta).toFixed(2)%>">
        </div>
      </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>
